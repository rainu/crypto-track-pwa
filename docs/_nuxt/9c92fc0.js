(("undefined"!=typeof self?self:this).webpackJsonp=("undefined"!=typeof self?self:this).webpackJsonp||[]).push([[7],{709:function(t,e,r){"use strict";r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return l}));r(17),r(13);var n=[function(data){return data}],o=n.length,c=function(content){return{version:o,content:content}},l=function(t){return new Promise((function(e,r){var n={};if(t&&t.version)n=t;else try{n=JSON.parse(t)}catch(t){return void r(t)}n.version!==o&&(n=d(n)),e(n)}))},d=function(data){for(var i=data.version;i<n.length;i++)console.log("Import-Migration: do Step ".concat(i+1," of ").concat(n.length)),(data=n[i](data)).version=i+1;return data}},713:function(t,e,r){"use strict";r.r(e);r(13),r(25),r(31),r(340);var n=r(1),o=r(27),c=(r(30),r(161),r(29)),l=r(742),d=r.n(l),f=r(529),v=void 0;function y(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0,n=function(){};return{s:n,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var h=[{label:"Type",value:"type"},{label:"Buy Amount",value:"buy.value"},{label:"Buy Currency.",value:"buy.currency"},{label:"Sell Amount",value:"sell.value"},{label:"Sell Currency",value:"sell.currency"},{label:"Fee",value:"fee.value"},{label:"Fee Currency",value:"fee.currency"},{label:"Exchange",value:"exchange"},{label:"Trade-Group",value:"trade.group"},{label:"Comment",value:"comment"},{label:"Date",value:"date"},{label:"Tx-ID",value:"trade.id"},{label:"Buy Value in your Account Currency",value:"counter.buy"},{label:"Sell Value in your Account Currency",value:"counter.sell"}],k=function(t){var e={value:null,currency:null};return t.data&&t.data.fee&&t.data.fee.length>0&&(e.value=t.data.fee[0].amount,e.currency=t.data.fee[0].currency.name),e},O=function(t,e){if(t.data&&t.data.exchangeRates&&t.data.exchangeRates.length>0){var r,n=y(t.data.exchangeRates);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.in.name===e.name&&o.in.type===e.type)return o}}catch(t){n.e(t)}finally{n.f()}}return null},w=function(t){var e={buy:null,sell:null};if(t.data&&t.data.exchangeRates&&t.data.exchangeRates.length>0){if(t.data&&t.data.out&&t.data.out.currency&&"crypto"===t.data.out.currency.type){var r=O(t,t.data.out.currency);r&&(e.sell=t.data.out.amount*r.ratio)}if(t.data&&t.data.in&&t.data.in.currency&&"crypto"===t.data.in.currency.type){var n=O(t,t.data.in.currency);n&&(e.buy=t.data.in.amount*n.ratio)}}return e},j={exchange:function(t){return[{type:"Trade",buy:{value:t.data.in.amount,currency:t.data.in.currency.name},sell:{value:t.data.out.amount,currency:t.data.out.currency.name},fee:k(t),exchange:t.data.details.exchange,trade:{id:t.data.details.comment,group:t.data.details.group},counter:w(t),comment:t.data.details.comment,date:f.a(t.date,"yyyy-MM-dd HH:mm")}]},transfer:function(t){return[{type:"Withdrawal",sell:{value:t.data.amount,currency:t.data.currency.name},fee:k(t),exchange:t.data.details.exchange,trade:{id:t.data.details.comment,group:t.data.details.group},comment:t.data.details.comment,date:f.a(t.date,"yyyy-MM-dd HH:mm")},{type:"Deposit",buy:{value:t.data.amount,currency:t.data.currency.name},exchange:t.data.details.exchange,trade:{id:t.data.details.comment,group:t.data.details.group},comment:t.data.details.comment,date:f.a(t.date,"yyyy-MM-dd HH:mm")}]},spent:function(t){return[{type:"Spend",sell:{value:t.data.out.amount,currency:t.data.out.currency.name},fee:k(t),exchange:t.data.details.exchange,trade:{id:t.data.details.comment,group:t.data.details.group},counter:w(t),comment:t.data.details.comment,date:f.a(t.date,"yyyy-MM-dd HH:mm")}]},giftIn:function(t){return[{type:"Gift/Tip",buy:{value:t.data.in.amount,currency:t.data.in.currency.name},fee:k(t),exchange:t.data.details.exchange,trade:{id:t.data.details.comment,group:t.data.details.group},counter:w(t),comment:t.data.details.comment,date:f.a(t.date,"yyyy-MM-dd HH:mm")}]},giftOut:function(t){return[{type:"Gift",sell:{value:t.data.out.amount,currency:t.data.out.currency.name},fee:k(t),exchange:t.data.details.exchange,trade:{id:t.data.details.comment,group:t.data.details.group},counter:w(t),comment:t.data.details.comment,date:f.a(t.date,"yyyy-MM-dd HH:mm")}]},lost:function(t){return[{type:"Lost",sell:{value:t.data.out.amount,currency:t.data.out.currency.name},fee:k(t),exchange:t.data.details.exchange,trade:{id:t.data.details.comment,group:t.data.details.group},counter:w(t),comment:t.data.details.comment,date:f.a(t.date,"yyyy-MM-dd HH:mm")}]},stolen:function(t){return v.lost(t)}};function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var x={name:"CoinTracking",data:function(){return{exportError:null,snackbar:{error:!1}}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(o.d)({transactions:function(t){return t.transactions.transactions}})),methods:{onDownloadFile:function(){var t,e=this;return(t=this.transactions,new Promise((function(e,r){for(var n={fields:h},o=[],l=0,f=Object.values(t);l<f.length;l++){var v=f[l];if(!j[v.type])return void r("Transaction not supported yet: ".concat(v.type));o.push.apply(o,Object(c.a)(j[v.type](v)))}e(d.a.parse(o,n))}))).then((function(content){var t=new Blob([content],{type:"text/csv"}),link=e.$refs.downloadLink;link.href=window.URL.createObjectURL(t),link.download="cointracking.csv",link.click()})).catch((function(t){e.snackbar.error=!0,e.exportError=t.Error}))}}},C=r(34),V=r(40),E=r.n(V),P=r(265),$=r(235),F=r(794),component=Object(C.a)(x,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-snackbar",{staticClass:"text-center",attrs:{color:"error",timeout:5e3},model:{value:t.snackbar.error,callback:function(e){t.$set(t.snackbar,"error",e)},expression:"snackbar.error"}},[t._v("\n    "+t._s(t.$t("backup.cointracking.failed",{err:t.exportError}))+"\n    "),r("v-btn",{attrs:{text:""},on:{click:function(e){t.snackbar.error=!1}}},[r("v-icon",[t._v("close")])],1)],1),t._v(" "),r("v-btn",{attrs:{block:"",color:"primary"},on:{click:t.onDownloadFile}},[r("v-icon",{attrs:{left:""}},[t._v("cloud_upload")]),t._v("\n    "+t._s(t.$t("backup.file.export.title"))+"\n  ")],1),t._v(" "),r("a",{ref:"downloadLink",attrs:{hidden:""}})],1)}),[],!1,null,"3c165b44",null);e.default=component.exports;E()(component,{VBtn:P.a,VIcon:$.a,VSnackbar:F.a})},732:function(t,e,r){"use strict";r.r(e);r(13),r(25),r(31),r(340);var n=r(1),o=r(27),c=r(709);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={name:"FileExport",data:function(){return{}},methods:d(d({},Object(o.b)({backupContent:"backup/getBackupContent"})),{},{onDownloadFile:function(){var t=this;return this.backupContent().then((function(e){var r=Object(c.a)(e),n=new Blob([JSON.stringify(r,null,2)],{type:"text/json;charset=UTF-8"}),link=t.$refs.downloadLink;link.href=window.URL.createObjectURL(n),link.download="crypto_track_backup.json",link.click()}))}})},v=r(34),y=r(40),m=r.n(y),h=r(265),k=r(235),component=Object(v.a)(f,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("v-btn",{attrs:{block:"",color:"primary"},on:{click:this.onDownloadFile}},[e("v-icon",{attrs:{left:""}},[this._v("cloud_upload")]),this._v("\n    "+this._s(this.$t("backup.file.export.title"))+"\n  ")],1),this._v(" "),e("a",{ref:"downloadLink",attrs:{hidden:""}})],1)}),[],!1,null,"9673686e",null);e.default=component.exports;m()(component,{VBtn:h.a,VIcon:k.a})},733:function(t,e,r){"use strict";r.r(e);var n=r(1),o=r(27),c=r(709);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={name:"FileImport",data:function(){return{uploadError:null,snackbar:{error:!1,success:!1}}},methods:d(d({},Object(o.b)({applyBackup:"backup/applyBackup"})),{},{onConfirm:function(){window.location.reload()},onUploadFile:function(){var t=this;if(this.$refs.fileInput.files[0]){this.uploadError=null;var e=new FileReader;e.readAsText(this.$refs.fileInput.files[0],"UTF-8"),e.addEventListener("load",(function(e){Object(c.b)(e.target.result).then((function(e){t.applyBackup(e.content),t.snackbar.success=!0,t.$refs.fileInput.value=""})).catch((function(e){t.uploadError=e,t.snackbar.error=!0}))}))}}})},v=r(34),y=r(40),m=r.n(y),h=r(265),k=r(233),O=r(26),w=r(509),j=r(518),_=r(235),x=r(510),C=r(794),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-btn",{attrs:{block:"",color:"primary"},on:{click:function(e){return t.$refs.fileInput.click()}}},[r("v-icon",{attrs:{left:""}},[t._v("cloud_download")]),t._v("\n    "+t._s(t.$t("backup.file.import.title"))+"\n\n    "),r("input",{ref:"fileInput",attrs:{hidden:"",type:"file"},on:{change:t.onUploadFile}})],1),t._v(" "),r("v-snackbar",{staticClass:"text-center",attrs:{color:"error",timeout:5e3},model:{value:t.snackbar.error,callback:function(e){t.$set(t.snackbar,"error",e)},expression:"snackbar.error"}},[t._v("\n    "+t._s(t.$t("backup.file.import.failed",{err:t.uploadError}))+"\n    "),r("v-btn",{attrs:{text:""},on:{click:function(e){t.snackbar.error=!1}}},[r("v-icon",[t._v("close")])],1)],1),t._v(" "),r("v-dialog",{attrs:{persistent:""},model:{value:t.snackbar.success,callback:function(e){t.$set(t.snackbar,"success",e)},expression:"snackbar.success"}},[r("v-card",[r("v-card-title",[t._v(t._s(t.$t("backup.file.import.success")))]),t._v(" "),r("v-card-text",[t._v(t._s(t.$t("backup.reload")))]),t._v(" "),r("v-card-actions",[r("v-row",{attrs:{dense:""}},[r("v-col",{attrs:{cols:"12"}},[r("v-btn",{attrs:{block:"",color:"primary"},on:{click:t.onConfirm}},[r("v-icon",[t._v("check")]),t._v("\n              "+t._s(t.$t("common.ok"))+"\n            ")],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"cdad932a",null);e.default=component.exports;m()(component,{VBtn:h.a,VCard:k.a,VCardActions:O.a,VCardText:O.c,VCardTitle:O.d,VCol:w.a,VDialog:j.a,VIcon:_.a,VRow:x.a,VSnackbar:C.a})},798:function(t,e,r){"use strict";r.r(e);var n=r(732),o={name:"BackupFile",components:{FileImport:r(733).default,FileExport:n.default}},c=r(34),l=r(40),d=r.n(l),f=r(233),v=r(26),y=r(509),m=r(510),component=Object(c.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-card",[e("v-card-title",[this._v(this._s(this.$t("backup.file.title")))]),this._v(" "),e("v-card-actions",[e("v-row",{attrs:{align:"center"}},[e("v-col",{attrs:{md:"6"}},[e("FileExport")],1),this._v(" "),e("v-col",{attrs:{md:"6"}},[e("FileImport")],1)],1)],1)],1)}),[],!1,null,"7c5b44e0",null),h=component.exports;d()(component,{FileExport:r(732).default,FileImport:r(733).default}),d()(component,{VCard:f.a,VCardActions:v.a,VCardTitle:v.d,VCol:y.a,VRow:m.a});var k={components:{CoinTracking:r(713).default,BackupFile:h}},O=r(512),w=Object(c.a)(k,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-container",{attrs:{fluid:""}},[e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("BackupFile")],1)],1),this._v(" "),e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-card",[e("v-card-title",[this._v(this._s(this.$t("backup.cointracking.title")))]),this._v(" "),e("v-card-actions",[e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("CoinTracking")],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"c756e978",null);e.default=w.exports;d()(w,{CoinTracking:r(713).default}),d()(w,{VCard:f.a,VCardActions:v.a,VCardTitle:v.d,VCol:y.a,VContainer:O.a,VRow:m.a})}}]);